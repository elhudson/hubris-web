//ðŸ§©Don't Edit this file.âœ¨Generated in Fri Jan 26 2024 12:23:22 GMT-0500 (Eastern Standard Time)âœ¨

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

generator client {
  provider = "prisma-client-js"
}

model Campaigns {
  id           String       @id @unique @default(uuid())
  name         String       @default("Untitled Campaign")
  description  String?      @db.MediumText
  settings     Settings[]
  creator      Users?       @relation(fields: [creatorId], references: [id], name: "creator")
  dm           Users?       @relation(fields: [dmId], references: [id], name: "dm")
  players      Users[]      @relation(name: "players")
  dmId         String?
  creatorId    String?
  characters   Characters[]
  sessionCount Int          @default(0)
  logbook      Summaries[]
}

model Summaries {
  id         String     @id @unique @default(uuid())
  session    Int
  campaign   Campaigns  @relation(fields: [campaignId], references: [id])
  campaignId String
  text       String     @db.LongText
  author     Characters @relation(fields: [authorId], references: [id])
  authorId   String
}

model Characters {
  id             String           @id @unique
  user           Users            @relation(fields: [usersId], references: [id])
  updated        DateTime         @default(now())
  biography      Json
  xp_earned      Int
  xp_spent       Int
  burn           Int              @default(0)
  HD             HD[]
  classes        Classes[]
  backgrounds    Backgrounds[]
  effects        Effects[]
  ranges         Ranges[]
  durations      Durations[]
  class_features Class_Features[]
  tag_features   Tag_Features[]
  skills         Skills[]
  inventory      Inventories?
  str            Int
  dex            Int
  con            Int
  wis            Int
  int            Int
  cha            Int
  health         Health?
  portrait       String?          @db.MediumText
  usersId        String
  powerset       PowerSet?
  Campaign       Campaigns?       @relation(fields: [campaignId], references: [id])
  campaignId     String?
  summaries      Summaries[]
}

model HD {
  id           Int        @id @default(autoincrement())
  owner        Characters @relation(fields: [charactersId], references: [id])
  src          String     @default("default")
  die          Hit_Dice   @relation(fields: [hit_diceId], references: [id])
  max          Int        @default(1)
  used         Int        @default(0)
  charactersId String
  hit_diceId   String
}

model Health {
  character    Characters @relation(fields: [charactersId], references: [id])
  injuries     Injuries?  @relation(fields: [injuriesId], references: [id])
  hp           Int
  notes        String?    @db.MediumText
  injuriesId   String?
  charactersId String     @id @unique
}

model Inventories {
  character Characters? @relation(fields: [charactersId], references: [id])
  weapons   Weapons[]
  armor     Armor[]
  items     Items[]

  charactersId String @id @unique
}

model PowerSet {
  character    Characters @relation(fields: [charactersId], references: [id])
  charactersId String     @id @unique
  powers       Powers[]
}

model Weapons {
  id             String        @id @unique
  name           String        @default("")
  description    String?
  uses           String?       @default("str")
  damage_types   Damage_Types? @relation(fields: [damage_typesId], references: [id])
  bonus          Int?
  martial        Boolean
  heavy          Boolean
  equipped       Boolean       @default(false)
  Inventories    Inventories[]
  damage_typesId String?
}

model Armor {
  id          String  @id @unique
  class       String
  name        String  @default("")
  description String?
  equipped    Boolean @default(false)

  Inventories Inventories[]
}

model Items {
  id          String        @id @unique
  name        String        @default("")
  description String?
  equipped    Boolean       @default(false)
  Inventories Inventories[]
}

model Powers {
  id         String      @id @unique
  name       String
  flavortext String      @db.LongText
  creator    Users       @relation(fields: [creatorId], references: [id])
  creatorId  String
  effects    Effects[]
  ranges     Ranges[]
  durations  Durations[]
  characters PowerSet[]
}

model Tags {
  id             String         @id @unique
  title          String         @db.MediumText
  description    String         @db.MediumText
  effects        Effects[]
  classes        Classes[]
  tag_features   Tag_Features[]
  damage_types   Damage_Types?
  damage_typesId String?
}

model Hit_Dice {
  id      String    @id @unique
  title   String
  cost    Int       @default(1)
  classes Classes[]
  HD      HD[]
}

model Damage_Types {
  id          String @id @unique
  title       String @db.MediumText
  description String @db.MediumText

  tags           Tags?            @relation(fields: [tagsId], references: [id])
  effects        Effects[]
  class_features Class_Features[]
  tag_features   Tag_Features[]
  tagsId         String?          @unique
  weapons        Weapons[]
}

model Tag_Features {
  id           String         @id @unique
  title        String
  description  String         @db.MediumText
  ticks        Int?
  tier         Int
  xp           Int
  tags         Tags?          @relation(fields: [tagsId], references: [id])
  tagsId       String?
  requires     Tag_Features[] @relation("tag_features_prq")
  required_for Tag_Features[] @relation("tag_features_prq")
  damage_types Damage_Types[]
  Characters   Characters[]
  charactersId String?
}

model Effects {
  id           String         @id @unique
  title        String?
  description  String         @db.MediumText
  power        Float
  xp           Int
  tier         Int
  requires     Effects[]      @relation("effects_prq")
  required_for Effects[]      @relation("effects_prq")
  tags         Tags[]
  damage_types Damage_Types[]
  trees        Trees?         @relation(fields: [treesId], references: [id])
  treesId      String?
  Characters   Characters[]
  charactersId String?
  Powers       Powers[]
}

model Trees {
  id          String      @id @unique
  title       String?
  description String      @db.MediumText
  effects     Effects[]
  ranges      Ranges[]
  durations   Durations[]
}

model Durations {
  id           String       @id @unique
  title        String?
  description  String       @db.MediumText
  power        Float
  xp           Int
  tier         Int
  ticks        Int?
  requires     Durations[]  @relation("durations_prq")
  required_for Durations[]  @relation("durations_prq")
  trees        Trees[]
  Characters   Characters[]
  charactersId String?
  Powers       Powers[]
}

model Ranges {
  id           String       @id @unique
  title        String?
  description  String       @db.MediumText
  power        Float
  xp           Int
  tier         Int
  requires     Ranges[]     @relation("ranges_prq")
  required_for Ranges[]     @relation("ranges_prq")
  trees        Trees[]
  Characters   Characters[]
  charactersId String?
  Powers       Powers[]
}

model Classes {
  id             String           @id @unique
  title          String?
  description    String           @db.MediumText
  weaponry       String
  armory         String           @default("None")
  abilities      Abilities[]
  skills         Skills[]
  class_features Class_Features[]
  class_paths    Class_Paths[]
  tags           Tags[]
  Characters     Characters[]
  hit_dice       Hit_Dice?        @relation(fields: [hit_DiceId], references: [id])
  hit_DiceId     String?
}

model Class_Features {
  id            String           @id @unique
  title         String?
  description   String           @db.MediumText
  xp            Int
  ticks         Int?
  tier          Int
  damage_types  Damage_Types[]
  class_paths   Class_Paths?     @relation(fields: [class_PathsId], references: [id])
  classes       Classes?         @relation(fields: [classesId], references: [id])
  class_PathsId String?
  classesId     String?
  requires      Class_Features[] @relation("class_features_prq")
  required_for  Class_Features[] @relation("class_features_prq")
  Characters    Characters[]
}

model Class_Paths {
  id             String           @id @unique
  title          String?
  description    String           @db.MediumText
  class_features Class_Features[]
  classes        Classes?         @relation(fields: [classesId], references: [id])
  classesId      String?
}

model Abilities {
  id          String        @id @unique
  title       String?
  description String        @db.MediumText
  code        String
  backgrounds Backgrounds[]
  skills      Skills[]
  classes     Classes[]
  conditions  Conditions[]
}

model Skills {
  id            String       @id @unique
  title         String?
  description   String       @db.MediumText
  abilities     Abilities?   @relation(fields: [abilitiesId], references: [id])
  backgrounds   Backgrounds?
  classes       Classes[]
  characters    Characters[]
  abilitiesId   String?
  backgroundsId String?
}

model Backgrounds {
  id                  String               @id @unique
  title               String?
  description         String               @db.MediumText
  settings            Settings?            @relation(fields: [settingsId], references: [id])
  abilities           Abilities?           @relation(fields: [abilitiesId], references: [id])
  skills              Skills?              @relation(fields: [skillsId], references: [id])
  background_features Background_Features?
  skillsId            String?              @unique
  abilitiesId         String?
  settingsId          String?
  Characters          Characters[]
}

model Settings {
  id          String        @id @unique
  title       String
  backgrounds Backgrounds[]
  description String        @db.MediumText
  campaigns   Campaigns[]
}

model Background_Features {
  id            String       @id @unique
  title         String
  description   String       @db.MediumText
  ticks         Int?
  backgrounds   Backgrounds? @relation(fields: [backgroundsId], references: [id])
  backgroundsId String?      @unique
}

model Injuries {
  id         String       @id @unique
  title      String
  duration   String
  health     Health[]
  conditions Conditions[]
}

model Conditions {
  id          String      @id @unique
  title       String
  description String      @db.MediumText
  abilities   Abilities[]
  injuries    Injuries[]
}

model Users {
  id         String       @id @unique
  username   String       @unique
  password   String
  Characters Characters[]
  Powers     Powers[]
  PlayingIn  Campaigns[]  @relation(name: "players")
  DMing      Campaigns[]  @relation(name: "dm")
  Campaigns  Campaigns[]  @relation(name: "creator")
}
