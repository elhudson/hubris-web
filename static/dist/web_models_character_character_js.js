"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkhubris_web"] = self["webpackChunkhubris_web"] || []).push([["web_models_character_character_js"],{

/***/ "./web/components/components/numbers.js":
/*!**********************************************!*\
  !*** ./web/components/components/numbers.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Bonus: () => (/* binding */ Bonus),\n/* harmony export */   Counter: () => (/* binding */ Counter),\n/* harmony export */   DC: () => (/* binding */ DC),\n/* harmony export */   Points: () => (/* binding */ Points),\n/* harmony export */   Tracker: () => (/* binding */ Tracker)\n/* harmony export */ });\n/* harmony import */ var _styles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./styles */ \"./web/components/components/styles.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _images__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./images */ \"./web/components/components/images.js\");\n/* harmony import */ var _containers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./containers */ \"./web/components/components/containers.js\");\n/* harmony import */ var _interactive__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./interactive */ \"./web/components/components/interactive.js\");\n\n\n\n\n\nfunction Bonus({\n  item,\n  override\n}) {\n  var layout = (0,_styles__WEBPACK_IMPORTED_MODULE_0__.style)('layout', {\n    display: 'flex',\n    width: '100% !important',\n    alignItems: 'baseline',\n    justifyContent: 'center',\n    \"& input[type='number']\": {\n      maxWidth: '3ch',\n      height: 'auto'\n    }\n  });\n  var cls = (0,_styles__WEBPACK_IMPORTED_MODULE_0__.style)('over', override);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_containers__WEBPACK_IMPORTED_MODULE_3__.LabeledItem, {\n    className: cls,\n    childStyles: layout,\n    label: item.label\n  }, item.value < 0 ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_images__WEBPACK_IMPORTED_MODULE_2__.Icon, {\n    name: \"minus\",\n    sx: {\n      margin: 'unset'\n    }\n  }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_images__WEBPACK_IMPORTED_MODULE_2__.Icon, {\n    name: \"plus\",\n    sx: {\n      margin: 'unset'\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Modifier, {\n    editable: false,\n    id: item.id,\n    value: Math.abs(item.value)\n  }));\n}\nfunction Modifier({\n  editable,\n  value,\n  handler = null\n}) {\n  const s = (0,_styles__WEBPACK_IMPORTED_MODULE_0__.style)('modifier', {\n    border: 'unset',\n    fontSize: _styles__WEBPACK_IMPORTED_MODULE_0__.styles.big,\n    textAlign: 'center',\n    position: 'relative',\n    appearance: 'textfield',\n    width: '100%',\n    boxSizing: 'border-box',\n    backgroundColor: _styles__WEBPACK_IMPORTED_MODULE_0__.styles.transparent,\n    color: _styles__WEBPACK_IMPORTED_MODULE_0__.styles.text\n  });\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"input\", {\n    className: s,\n    type: \"number\",\n    readonly: editable,\n    value: value\n  });\n}\nfunction DC({\n  item\n}) {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_containers__WEBPACK_IMPORTED_MODULE_3__.LabeledItem, {\n    label: item.label\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Modifier, {\n    editable: item.readonly,\n    id: item.id,\n    value: item.value\n  }));\n}\nfunction Points({\n  item\n}) {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", {\n    className: \"item points\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"label\", null, item.label), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Modifier, {\n    editable: false,\n    id: item.id,\n    value: item.value\n  }));\n}\nfunction Tracker({\n  header,\n  left,\n  right,\n  children,\n  update\n}) {\n  const display = (0,_styles__WEBPACK_IMPORTED_MODULE_0__.style)('tracker', {\n    display: 'flex',\n    flexDirection: 'row',\n    height: 'auto',\n    '& > div': {\n      // flex: '1 1 auto',\n      width: '50%',\n      border: 'unset',\n      margin: 0,\n      '& label': {\n        ..._styles__WEBPACK_IMPORTED_MODULE_0__.reusable.boxLabel\n      },\n      '&:first-child': {\n        borderRight: _styles__WEBPACK_IMPORTED_MODULE_0__.styles.border\n      }\n    }\n  });\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_containers__WEBPACK_IMPORTED_MODULE_3__.LabeledItem, {\n    label: header,\n    childStyles: display\n  }, left.readOnly ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(DC, {\n    item: left\n  }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Counter, {\n    item: left,\n    update: update\n  }), right.readOnly ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(DC, {\n    item: right\n  }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Counter, {\n    item: right,\n    update: update\n  }));\n}\nfunction Counter({\n  item,\n  update\n}) {\n  const increase = update[0];\n  const decrease = update[1];\n  const display = (0,_styles__WEBPACK_IMPORTED_MODULE_0__.style)('style', {\n    height: 'unset !important',\n    border: 'unset !important',\n    '& button:last-child': {\n      borderRight: _styles__WEBPACK_IMPORTED_MODULE_0__.styles.border\n    }\n  });\n  const layout = (0,_styles__WEBPACK_IMPORTED_MODULE_0__.style)('cols', {\n    display: 'flex',\n    flexDirection: 'row-reverse'\n  });\n  !Object.hasOwn(item, 'min') && (item.min = 0);\n  !Object.hasOwn(item, 'max') && (item.max = 999999);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_containers__WEBPACK_IMPORTED_MODULE_3__.LabeledItem, {\n    childStyles: layout,\n    label: item.label\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Modifier, {\n    editable: item.readonly,\n    value: item.value\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_interactive__WEBPACK_IMPORTED_MODULE_4__.Buttons, {\n    className: display\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_interactive__WEBPACK_IMPORTED_MODULE_4__.Button, {\n    name: item.name,\n    min: item.min,\n    path: item.path,\n    max: item.max,\n    type: \"button\",\n    onClick: increase\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_images__WEBPACK_IMPORTED_MODULE_2__.Icon, {\n    name: 'plus'\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_interactive__WEBPACK_IMPORTED_MODULE_4__.Button, {\n    name: item.name,\n    min: item.min,\n    path: item.path,\n    max: item.max,\n    type: \"button\",\n    onClick: decrease\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_images__WEBPACK_IMPORTED_MODULE_2__.Icon, {\n    name: 'minus'\n  }))));\n}\n\n//# sourceURL=webpack://hubris-web/./web/components/components/numbers.js?");

/***/ }),

/***/ "./web/elements/sorts.js":
/*!*******************************!*\
  !*** ./web/elements/sorts.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Bin: () => (/* binding */ Bin),\n/* harmony export */   Choices: () => (/* binding */ Choices),\n/* harmony export */   Groups: () => (/* binding */ Groups),\n/* harmony export */   Options: () => (/* binding */ Options)\n/* harmony export */ });\n/* harmony import */ var immer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! immer */ \"./node_modules/immer/dist/immer.mjs\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_components_containers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/components/containers */ \"./web/components/components/containers.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _components_components_interactive__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/components/interactive */ \"./web/components/components/interactive.js\");\n/* harmony import */ var _components_components_styles__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/components/styles */ \"./web/components/components/styles.js\");\n/* harmony import */ var _feature__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./feature */ \"./web/elements/feature.js\");\n\n\n\n\n\n\n\nclass Choices {\n  [immer__WEBPACK_IMPORTED_MODULE_6__.immerable] = true;\n  constructor() {}\n  regroup(action) {\n    lodash__WEBPACK_IMPORTED_MODULE_0___default().get(this, action.path).regroup(action.data.value);\n  }\n  includes(feature) {\n    var self = new Array();\n    Object.keys(this).forEach(item => {\n      self = lodash__WEBPACK_IMPORTED_MODULE_0___default().concat(self, this[item].pool());\n    });\n    return self.map(s => s.id).includes(feature.id);\n  }\n  static from(obj) {\n    var self = new Choices();\n    Object.assign(self, obj);\n    return self;\n  }\n  addDrop(action, ch, free = false) {\n    var feature = ruleset[action.table][action.data.value].clone();\n    free && (feature.xp = 0);\n    if (action.data.checked == true && feature.qualifies(ch) || action.data.checked == false && feature.removeable(ch)) {\n      var tree = lodash__WEBPACK_IMPORTED_MODULE_0___default().get(this, action.path);\n      var func = action.data.checked ? 'add' : 'remove';\n      var cost = lodash__WEBPACK_IMPORTED_MODULE_0___default().get(ch, action.path)[func](feature, action.context);\n      cost != null && (ch.progression.xp.spent += cost);\n      action.table == 'effects' && this.handleMetadata(feature, func, ch);\n      tree.get(ruleset[action.table][action.data.value]).bought = action.data.checked;\n      tree.forEach(item => {\n        if (item.qualifies(ch) || item.bought == true) {\n          item.buyable = true;\n          if (item.removeable(ch) == false || item.xp == 0) {\n            item.buyable = false;\n          }\n        } else {\n          item.buyable = false;\n        }\n      });\n    }\n  }\n  handleMetadata(feature, act, ch) {\n    const synthAction = (feature, act) => {\n      return {\n        path: `powers.metadata.${feature.table}`,\n        parent: 'options',\n        table: `${feature.table}`,\n        data: {\n          value: feature.id,\n          checked: act == 'add' ? true : false\n        }\n      };\n    };\n    var range = synthAction(feature.range, act);\n    var duration = synthAction(feature.duration, act);\n    this.addDrop(range, ch, true);\n    this.addDrop(duration, ch, true);\n  }\n  display({\n    binner,\n    handler\n  }) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", null, Object.keys(this).map(key => this[key].display({\n      binner: binner,\n      handler: handler\n    })));\n  }\n}\nclass Options extends Choices {\n  [immer__WEBPACK_IMPORTED_MODULE_6__.immerable] = true;\n  constructor(character) {\n    super();\n    var buyable = character.buyable();\n    this.features = Choices.from(buyable.features);\n    this.powers = Choices.from(buyable.powers);\n    this.powers.metadata = Choices.from(buyable.powers.metadata);\n    this.classes = new Groups(ruleset.classes.list(), [character.classes.base]);\n    this.backgrounds = new Groups(ruleset.backgrounds.list());\n  }\n}\nclass Groups {\n  [immer__WEBPACK_IMPORTED_MODULE_6__.immerable] = true;\n  constructor(aray, possessions = null) {\n    this.by = '';\n    this.content = {\n      [this.by]: new Bin(aray)\n    };\n    this.defaults = {\n      class_features: 'class_paths',\n      tag_features: 'tags',\n      effects: 'tree',\n      ranges: 'tree',\n      durations: 'tree',\n      \"classes\": \"\",\n      \"backgrounds\": \"\"\n    };\n    possessions != null && this.owned(possessions);\n    try {\n      this.regroup(this.defaults[aray[0].table]);\n    } catch {\n      {\n        Error;\n      }\n    }\n  }\n  *[Symbol.iterator]() {\n    var list = Object.values(this.content);\n    var fl = list.flat(10);\n    for (var i = 0; i < fl.length; i++) {\n      yield fl[i];\n    }\n  }\n  owned(group) {\n    this.forEach(item => {\n      if (group.includes(item)) {\n        item.bought = true;\n      }\n    });\n  }\n  static parse(data) {\n    var by = data.by;\n    var items = Object.values(data.content).flat(2);\n    if (items.length > 0) {\n      for (var i = 0; i < items.length; i++) {\n        items[i] = _feature__WEBPACK_IMPORTED_MODULE_5__[\"default\"].parse(items[i]);\n      }\n    }\n    var self = new Groups(items);\n    self.regroup(by);\n    return self;\n  }\n  forEach(func) {\n    for (var o of this) {\n      func(o);\n    }\n  }\n  map(func) {\n    for (var o of this) {\n      return func(o);\n    }\n  }\n  filter(func) {\n    for (var o of this) {\n      if (func(o) == true) {\n        return o;\n      }\n    }\n  }\n  clone_branch(feature) {\n    var branch = this.get_branch(feature);\n    return lodash__WEBPACK_IMPORTED_MODULE_0___default().cloneDeep(branch);\n  }\n  add(feature) {\n    var branch = this.get_branch(feature);\n    branch.push(feature);\n    return feature.xp;\n  }\n  remove(feature) {\n    var branch = this.get_branch(feature);\n    lodash__WEBPACK_IMPORTED_MODULE_0___default().remove(branch, f => f.id == feature.id);\n    return -1 * feature.xp;\n  }\n  get_branch(feature) {\n    var branch = this.find_branch(feature);\n    return this.content[branch];\n  }\n  find_branch(feature) {\n    var location = feature.get(this.by);\n    location == 'None' && (location = \"\");\n    return location;\n  }\n  find_index(feature) {\n    var branch = this.find_branch(feature);\n    var index = this.content[branch].findIndex(f => f.id == feature.id);\n    return index;\n  }\n  coordinates(feature) {\n    var branch = this.find_branch(feature);\n    var index = this.find_index(feature);\n    if (index == -1) {\n      this.enqueue(feature);\n      index = this.find_index(feature);\n    }\n    return {\n      branch: branch,\n      index: index\n    };\n  }\n  pool() {\n    var pool = [];\n    this.forEach(f => {\n      pool.push(f);\n    });\n    pool = lodash__WEBPACK_IMPORTED_MODULE_0___default().uniqBy(pool, 'id');\n    return pool;\n  }\n  includes(feature) {\n    return lodash__WEBPACK_IMPORTED_MODULE_0___default().find(this.pool(), item => item.id == feature.id) == undefined ? false : true;\n  }\n  get(feature) {\n    var coordinates = this.coordinates(feature);\n    return this.content[coordinates.branch][coordinates.index];\n  }\n  regroup(prop) {\n    var pool = this.pool();\n    if (prop == '') {\n      this.by = '';\n      this.content = {\n        '': new Bin(pool)\n      };\n    } else {\n      var groups = new Object();\n      var keys = [...new Set([...new Set(pool.map(s => s.get(prop)))].flat(10))];\n      keys.forEach(k => {\n        groups[k] = new Bin();\n      });\n      pool.forEach(item => {\n        var ct = item.get(prop);\n        if (Array.isArray(ct)) {\n          ct.forEach(c => {\n            groups[c].push(item);\n          });\n        } else {\n          groups[ct].push(item);\n        }\n      });\n      this.by = prop;\n      this.content = groups;\n    }\n  }\n  display({\n    binner,\n    handler = null,\n    asOption = true\n  }) {\n    function Bins({\n      bins,\n      binner,\n      handler = null\n    }) {\n      var pool = bins.pool();\n      if (pool.length > 0) {\n        var loc = pool[0].table;\n        var path = pool[0].path;\n        var possible = [...new Set(pool.flatMap(f => props(f)))].filter(f => ruleset.reference.bins[loc].includes(f));\n        function props(obj) {\n          return Object.keys(obj);\n        }\n        var cols = Object.keys(bins.content).length;\n        cols > 4 && (cols = 4);\n        const display = (0,_components_components_styles__WEBPACK_IMPORTED_MODULE_4__.style)('bins', {\n          display: 'grid',\n          gridTemplateColumns: `repeat(${cols}, auto)`\n        });\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment), null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_interactive__WEBPACK_IMPORTED_MODULE_3__.Controls, {\n          icon: 'group'\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_interactive__WEBPACK_IMPORTED_MODULE_3__.Button, {\n          onClick: binner,\n          table: loc,\n          path: path,\n          value: '',\n          \"aria-selected\": '' == bins.by\n        }, \"None\"), possible.map(l => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_interactive__WEBPACK_IMPORTED_MODULE_3__.Button, {\n          table: loc,\n          path: path,\n          onClick: binner,\n          value: l,\n          \"aria-selected\": l == bins.by\n        }, l.replace('_', ' ')))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", {\n          className: display\n        }, Object.keys(bins.content).map(by => bins.content[by].display({\n          label: by,\n          handler: handler,\n          asOption: asOption\n        }))));\n      } else {\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment), null);\n      }\n    }\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(Bins, {\n      bins: this,\n      binner: binner,\n      handler: handler\n    });\n  }\n}\nclass Bin extends Array {\n  [immer__WEBPACK_IMPORTED_MODULE_6__.immerable] = true;\n  constructor(data = []) {\n    super(...Array.from(data));\n    this.sort('xp');\n  }\n  sort(by) {\n    Object.assign(this, lodash__WEBPACK_IMPORTED_MODULE_0___default().sortBy(this, item => lodash__WEBPACK_IMPORTED_MODULE_0___default().get(item, by)));\n  }\n  display({\n    label,\n    handler = null,\n    asOption\n  }) {\n    var func = asOption ? 'displayOption' : 'displayFeature';\n    function Bin({\n      data,\n      label,\n      handler = null\n    }) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_1__.Block, {\n        header: label\n      }, data.map(f => f[func]({\n        handler: handler\n      })));\n    }\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(Bin, {\n      data: Array.from(this),\n      label: label,\n      handler: handler\n    });\n  }\n}\n\n//# sourceURL=webpack://hubris-web/./web/elements/sorts.js?");

/***/ }),

/***/ "./web/models/character/character.js":
/*!*******************************************!*\
  !*** ./web/models/character/character.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Character: () => (/* binding */ Character),\n/* harmony export */   SaveButton: () => (/* binding */ SaveButton),\n/* harmony export */   generatePatch: () => (/* binding */ generatePatch),\n/* harmony export */   useCharacter: () => (/* binding */ useCharacter)\n/* harmony export */ });\n/* harmony import */ var use_immer__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! use-immer */ \"./node_modules/use-immer/dist/use-immer.module.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var immer__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! immer */ \"./node_modules/immer/dist/immer.mjs\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _elements_sorts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../elements/sorts */ \"./web/elements/sorts.js\");\n/* harmony import */ var _sections_bio__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./sections/bio */ \"./web/models/character/sections/bio.js\");\n/* harmony import */ var _sections_skills__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./sections/skills */ \"./web/models/character/sections/skills.js\");\n/* harmony import */ var _sections_stats__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./sections/stats */ \"./web/models/character/sections/stats.js\");\n/* harmony import */ var _sections_progression__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./sections/progression */ \"./web/models/character/sections/progression.js\");\n/* harmony import */ var _sections_health__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./sections/health */ \"./web/models/character/sections/health.js\");\n/* harmony import */ var _sections_combat__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./sections/combat */ \"./web/models/character/sections/combat.js\");\n/* harmony import */ var _sections_features__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./sections/features */ \"./web/models/character/sections/features.js\");\n/* harmony import */ var _sections_powers__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./sections/powers */ \"./web/models/character/sections/powers.js\");\n/* harmony import */ var _sections_class__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./sections/class */ \"./web/models/character/sections/class.js\");\n/* harmony import */ var _sections_backgrounds__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./sections/backgrounds */ \"./web/models/character/sections/backgrounds.js\");\n/* harmony import */ var _components_components_interactive__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../components/components/interactive */ \"./web/components/components/interactive.js\");\n/* harmony import */ var _components_components_images__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../components/components/images */ \"./web/components/components/images.js\");\n/* harmony import */ var _components_components_styles__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../components/components/styles */ \"./web/components/components/styles.js\");\n/* harmony import */ var _components_components_containers__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../components/components/containers */ \"./web/components/components/containers.js\");\n/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @emotion/react */ \"./node_modules/@emotion/react/dist/emotion-element-c39617d8.browser.esm.js\");\n/* harmony import */ var _emotion_css__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @emotion/css */ \"./node_modules/@emotion/css/dist/emotion-css.esm.js\");\nlet _2 = t => t,\n  _t,\n  _t2,\n  _t3,\n  _t4;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass Character {\n  [immer__WEBPACK_IMPORTED_MODULE_18__.immerable] = true;\n  constructor(id) {\n    this.id = id;\n    this.classes = new _sections_class__WEBPACK_IMPORTED_MODULE_11__[\"default\"]();\n    this.backgrounds = new _sections_backgrounds__WEBPACK_IMPORTED_MODULE_12__[\"default\"]();\n    this.bio = new _sections_bio__WEBPACK_IMPORTED_MODULE_3__[\"default\"]();\n    this.combat = new _sections_combat__WEBPACK_IMPORTED_MODULE_8__[\"default\"]();\n    this.stats = new _sections_stats__WEBPACK_IMPORTED_MODULE_5__[\"default\"]();\n    this.skills = new _sections_skills__WEBPACK_IMPORTED_MODULE_4__[\"default\"]();\n    this.progression = new _sections_progression__WEBPACK_IMPORTED_MODULE_6__[\"default\"]();\n    this.health = new _sections_health__WEBPACK_IMPORTED_MODULE_7__[\"default\"]();\n    this.features = new _sections_features__WEBPACK_IMPORTED_MODULE_9__[\"default\"]();\n    this.powers = new _sections_powers__WEBPACK_IMPORTED_MODULE_10__[\"default\"]();\n    this.routes = {\n      sheet: '/sheet?' + new URLSearchParams({\n        character: this.id\n      }),\n      ref: '/character?' + new URLSearchParams({\n        character: this.id\n      }),\n      levelup: '/levelup?' + new URLSearchParams({\n        character: this.id\n      }),\n      trash: '/delete?' + new URLSearchParams({\n        character: this.id\n      })\n    };\n  }\n  clone() {\n    return lodash__WEBPACK_IMPORTED_MODULE_1__.cloneDeep(this);\n  }\n  static async request(id) {\n    var request = await fetch('/character?' + new URLSearchParams({\n      character: id\n    }));\n    var json = await request.json();\n    var character = Character.parse(json);\n    sessionStorage.setItem('character', JSON.stringify(character));\n    return character;\n  }\n  static assemble() {\n    return Character.parse(JSON.parse(sessionStorage.getItem('character')));\n  }\n  async delete() {\n    var resp = await fetch(this.routes.trash).then(j => j.json());\n    sessionStorage.removeItem('character');\n    alert(resp.msg);\n  }\n  static parse(data) {\n    var ch = new Character(data.id);\n    ch.classes = _sections_class__WEBPACK_IMPORTED_MODULE_11__[\"default\"].parse(data.classes);\n    ch.backgrounds = _sections_backgrounds__WEBPACK_IMPORTED_MODULE_12__[\"default\"].parse(data.backgrounds);\n    ch.stats = _sections_stats__WEBPACK_IMPORTED_MODULE_5__[\"default\"].parse(data.stats);\n    ch.features = _sections_features__WEBPACK_IMPORTED_MODULE_9__[\"default\"].parse(data.features, ch.backgrounds);\n    ch.progression = _sections_progression__WEBPACK_IMPORTED_MODULE_6__[\"default\"].parse(data.progression);\n    ch.powers = _sections_powers__WEBPACK_IMPORTED_MODULE_10__[\"default\"].parse(data.powers, {\n      scores: ch.stats.scores,\n      pb: ch.progression.proficiency(),\n      attr: ch.classes.base == null ? {\n        name: 'Strength'\n      } : ch.classes.base.attributes\n    });\n    ch.skills = _sections_skills__WEBPACK_IMPORTED_MODULE_4__[\"default\"].parse(data.skills, {\n      scores: ch.stats,\n      pb: ch.progression.proficiency()\n    });\n    ch.bio = _sections_bio__WEBPACK_IMPORTED_MODULE_3__[\"default\"].parse(data.bio);\n    ch.combat = _sections_combat__WEBPACK_IMPORTED_MODULE_8__[\"default\"].parse(data.combat, {\n      str: ch.stats.scores.str.value,\n      dex: ch.stats.scores.dex.value,\n      pb: ch.progression.proficiency(),\n      classname: ch.classes.base == null ? 'Wizard' : ch.classes.base.name\n    });\n    ch.health = _sections_health__WEBPACK_IMPORTED_MODULE_7__[\"default\"].parse(data.health);\n    ch.options = new _elements_sorts__WEBPACK_IMPORTED_MODULE_2__.Options(ch);\n    ch.bought();\n    return ch;\n  }\n  bought() {\n    var locations = ['features.class_features', 'features.tag_features', 'powers.effects', 'powers.metadata.ranges', 'powers.metadata.durations'];\n    locations.forEach(location => {\n      lodash__WEBPACK_IMPORTED_MODULE_1__.get(this.options, location).forEach(feature => {\n        feature.bought = lodash__WEBPACK_IMPORTED_MODULE_1__.get(this, location).includes(feature);\n        feature.buyable = feature.qualifies(this);\n      });\n    });\n  }\n  static async load(id = null) {\n    id == null && (id = new URLSearchParams(window.location.href.split('?')[1]).get('character'));\n    if (Object.hasOwn(sessionStorage, 'character')) {\n      var v = Character.assemble();\n      v.id = id;\n      return v;\n    } else {\n      var v = await Character.request(id);\n      return v;\n    }\n  }\n  save() {\n    sessionStorage.setItem('character', JSON.stringify(this));\n  }\n  async write() {\n    console.log(this.routes.ref);\n    var req = {\n      method: 'POST',\n      body: JSON.stringify(this),\n      headers: new Headers({\n        'Content-Type': 'application/json'\n      })\n    };\n    var r = await fetch(this.routes.ref, req).then(r => r.json());\n    return r;\n  }\n  has(feature) {\n    try {\n      return lodash__WEBPACK_IMPORTED_MODULE_1__.get(this, feature.path).includes(feature);\n    } catch {\n      TypeError;\n    }\n    {\n      return false;\n    }\n  }\n  available(obj, column) {\n    var r = obj.links(column).filter(t => t.qualifies(this));\n    return r;\n  }\n  buyable() {\n    var options = {\n      features: {\n        class_features: this.classes.base == null ? new _elements_sorts__WEBPACK_IMPORTED_MODULE_2__.Groups([]) : new _elements_sorts__WEBPACK_IMPORTED_MODULE_2__.Groups(this.classes.class_features()),\n        tag_features: this.classes.base == null ? new _elements_sorts__WEBPACK_IMPORTED_MODULE_2__.Groups([]) : new _elements_sorts__WEBPACK_IMPORTED_MODULE_2__.Groups(this.classes.tag_features())\n      },\n      powers: {\n        effects: this.classes.base == null ? new _elements_sorts__WEBPACK_IMPORTED_MODULE_2__.Groups([]) : new _elements_sorts__WEBPACK_IMPORTED_MODULE_2__.Groups([this.classes.effects()]),\n        metadata: {\n          ranges: new _elements_sorts__WEBPACK_IMPORTED_MODULE_2__.Groups(ruleset.ranges.list()),\n          durations: new _elements_sorts__WEBPACK_IMPORTED_MODULE_2__.Groups(ruleset.durations.list())\n        }\n      }\n    };\n    return options;\n  }\n  controls() {\n    function CharacterControls({\n      ch\n    }) {\n      const handleSave = async function handleSave() {\n        sessionStorage.setItem('character', JSON.stringify(ch));\n        var resp = await ch.write();\n        alert(resp.msg);\n      };\n      const handleLevelup = () => {\n        window.location.assign(ch.routes.levelup);\n      };\n      const handleSheet = () => {\n        window.location.assign(ch.routes.sheet);\n      };\n      const handleTrash = async function handleTrash() {\n        await ch.delete();\n      };\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_components_components_interactive__WEBPACK_IMPORTED_MODULE_13__.Buttons, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_components_components_interactive__WEBPACK_IMPORTED_MODULE_13__.Button, {\n        onClick: handleSave\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_components_components_images__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n        name: 'save'\n      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_components_components_interactive__WEBPACK_IMPORTED_MODULE_13__.Button, {\n        onClick: handleLevelup\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_components_components_images__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n        name: 'levelup'\n      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_components_components_interactive__WEBPACK_IMPORTED_MODULE_13__.Button, {\n        onClick: handleSheet\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_components_components_images__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n        name: 'character-sheet'\n      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_components_components_interactive__WEBPACK_IMPORTED_MODULE_13__.Button, {\n        onClick: handleTrash\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_components_components_images__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n        name: 'trash'\n      })));\n    }\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(CharacterControls, {\n      ch: this\n    });\n  }\n  thumbnail() {\n    function Thumbnail({\n      ch\n    }) {\n      const theme = (0,_emotion_react__WEBPACK_IMPORTED_MODULE_19__.u)();\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n        className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_17__.css)(_t || (_t = _2`\n                    border: ${0};\n                    padding:5px;\n                    height: fit-content;\n                    width: 100%;\n                    > div {\n                        margin-bottom:5px;\n                    }\n                `), theme.border)\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n        className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_17__.css)(_t2 || (_t2 = _2`\n                        border: ${0};\n                        width: 100%;\n                        white-space: nowrap;\n                        text-transform: uppercase;\n                        text-align: center;\n                        font-weight: bold;\n                        a {\n                            color: ${0};\n                        }\n                    `), theme.border, theme.text)\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"a\", {\n        href: ch.routes.sheet\n      }, ch.bio.name)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n        className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_17__.css)(_t3 || (_t3 = _2`\n                        border:${0};\n                        svg {\n                            height: 150px;\n                            width: 150px;\n                        }\n                    `), theme.border)\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_components_components_images__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n        name: `classes__${ch.classes.base.name.toLowerCase()}`\n      })), ch.controls(), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n        className: (0,_emotion_css__WEBPACK_IMPORTED_MODULE_17__.css)(_t4 || (_t4 = _2`\n                        border: ${0};\n                        padding: 5px;\n                    `), theme.border)\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_16__.Item, {\n        label: 'Class'\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"text\", null, ch.classes.base.name))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_16__.Item, {\n        label: 'Backgrounds'\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"text\", null, ch.backgrounds.primary.name, \" & \", ch.backgrounds.secondary.name))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_sections_bio__WEBPACK_IMPORTED_MODULE_3__.Alignment, {\n        selected: ch.bio.alignment\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_sections_progression__WEBPACK_IMPORTED_MODULE_6__.Tier, {\n        tier: ch.progression.tier()\n      })));\n    }\n    return Thumbnail({\n      ch: this\n    });\n  }\n}\nfunction SaveButton({\n  ch\n}) {\n  const handleSave = () => {\n    sessionStorage.setItem(ch.id, JSON.stringify(ch));\n    ch.write();\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    style: {\n      position: 'fixed',\n      width: 'fit-content',\n      background: _components_components_styles__WEBPACK_IMPORTED_MODULE_15__.styles.background,\n      top: 30,\n      right: 30\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_components_components_interactive__WEBPACK_IMPORTED_MODULE_13__.Button, {\n    onClick: handleSave\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_components_components_images__WEBPACK_IMPORTED_MODULE_14__.Icon, {\n    name: 'save',\n    size: 40\n  })));\n}\nfunction useCharacter(ch) {\n  const [character, dispatch] = (0,use_immer__WEBPACK_IMPORTED_MODULE_20__.useImmerReducer)(dispatcher, ch);\n  function dispatcher(draft, action) {\n    if (action.needs_context) {\n      action.context = draft;\n    }\n    draft[action.parent][action.type](action, draft);\n  }\n  return [character, dispatch];\n}\nfunction generatePatch(dispatcher) {\n  const patch = (parent, type, needs_context = false) => {\n    const handleChange = e => {\n      dispatcher({\n        type: type,\n        parent: parent,\n        needs_context: needs_context,\n        src: e.target.tagName,\n        path: e.target.getAttribute('path'),\n        data: e.target,\n        table: e.target.getAttribute('table')\n      });\n    };\n    return handleChange;\n  };\n  return patch;\n}\n\n//# sourceURL=webpack://hubris-web/./web/models/character/character.js?");

/***/ }),

/***/ "./web/models/character/section.js":
/*!*****************************************!*\
  !*** ./web/models/character/section.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Item: () => (/* binding */ Item),\n/* harmony export */   RadioArray: () => (/* binding */ RadioArray),\n/* harmony export */   \"default\": () => (/* binding */ Info)\n/* harmony export */ });\n/* harmony import */ var immer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! immer */ \"./node_modules/immer/dist/immer.mjs\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_components_interactive__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../components/components/interactive */ \"./web/components/components/interactive.js\");\n\n\n\n\nclass Info {\n  [immer__WEBPACK_IMPORTED_MODULE_3__.immerable] = true;\n  constructor(skeleton) {\n    Object.assign(this, skeleton);\n  }\n  static parse(raw) {\n    var self = new this();\n    raw != undefined && Object.assign(self, raw);\n    return self;\n  }\n  set_attribute(character, path, default_value) {\n    var data = lodash__WEBPACK_IMPORTED_MODULE_0___default().get(character, path);\n    if (data == undefined) {\n      var loc = path.split('.').slice(1);\n      lodash__WEBPACK_IMPORTED_MODULE_0___default().set(this, loc, default_value);\n    }\n  }\n  activate(action) {\n    var target = lodash__WEBPACK_IMPORTED_MODULE_0___default().get(this, action.path);\n    target.active = action.data.checked;\n  }\n  update(action) {\n    if (action.src == 'SELECT') {\n      var path = action.path;\n      lodash__WEBPACK_IMPORTED_MODULE_0___default().set(this, path, action.data.selectedOptions[0].value);\n    }\n    if (action.src == 'INPUT' || action.src == 'TEXTAREA') {\n      var path = action.path;\n      lodash__WEBPACK_IMPORTED_MODULE_0___default().set(this, path, action.data.value);\n    }\n  }\n  increment(action) {\n    var val = lodash__WEBPACK_IMPORTED_MODULE_0___default().get(this, action.path);\n    var max = action.data.getAttribute('max');\n    if (val < max) {\n      lodash__WEBPACK_IMPORTED_MODULE_0___default().set(this, action.path, val + 1);\n    }\n  }\n  decrement(action) {\n    var val = lodash__WEBPACK_IMPORTED_MODULE_0___default().get(this, action.path);\n    var min = action.data.getAttribute('min');\n    if (val > min) {\n      lodash__WEBPACK_IMPORTED_MODULE_0___default().set(this, action.path, val - 1);\n    }\n  }\n  radioSwitch(action) {\n    var target = lodash__WEBPACK_IMPORTED_MODULE_0___default().get(this, action.path).list();\n    var prev = lodash__WEBPACK_IMPORTED_MODULE_0___default().find(target, f => f.active == true);\n    prev.active = false;\n    var cur = lodash__WEBPACK_IMPORTED_MODULE_0___default().find(target, f => f.value == action.data.defaultValue);\n    cur.active = true;\n  }\n  add(action) {\n    return ruleset[action.path][action.data.value];\n  }\n}\nclass Item {\n  [immer__WEBPACK_IMPORTED_MODULE_3__.immerable] = true;\n  constructor(data = null) {\n    Object.assign(this, data);\n  }\n}\nclass RadioArray {\n  [immer__WEBPACK_IMPORTED_MODULE_3__.immerable] = true;\n  constructor({\n    keys,\n    values,\n    defaultActive,\n    immutable = null\n  }) {\n    for (var i = 0; i < keys.length; i++) {\n      this[keys[i]] = new Object();\n      if (values[i].value == undefined) {\n        this[keys[i]].value = values[i];\n      } else {\n        this[keys[i]] = values[i];\n      }\n      this[keys[i]].active = false;\n      this[keys[i]].index = i;\n      keys[i] == defaultActive && (this[keys[i]].active = true);\n      keys[i] == immutable && (this[keys[i]].active = true);\n    }\n  }\n  static parse(raw) {\n    var defaultActive = lodash__WEBPACK_IMPORTED_MODULE_0___default().find(Object.keys(raw), r => raw[r].active);\n    var self = new RadioArray({\n      keys: Object.keys(raw),\n      values: Object.values(raw),\n      defaultActive: defaultActive\n    });\n    return self;\n  }\n  list() {\n    return Object.values(this);\n  }\n  active() {\n    return lodash__WEBPACK_IMPORTED_MODULE_0___default().find(this.list(), f => f.active);\n  }\n  activate(value) {\n    var target = lodash__WEBPACK_IMPORTED_MODULE_0___default().find(this.list(), v => v.value == value);\n    target.active = true;\n    this.list().forEach(val => {\n      val.value != value && val.active == false;\n    });\n  }\n  Radio({\n    aray,\n    path,\n    group,\n    handler\n  }) {\n    const forceRerender = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    var processed = aray.list().map(item => new Object({\n      label: item.value,\n      value: item.value,\n      selected: item.active,\n      path: path\n    }));\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_interactive__WEBPACK_IMPORTED_MODULE_2__.Radio, {\n      label: group,\n      data: processed,\n      onClick: forceRerender,\n      onChange: handler\n    });\n  }\n}\n\n//# sourceURL=webpack://hubris-web/./web/models/character/section.js?");

/***/ }),

/***/ "./web/models/character/sections/backgrounds.js":
/*!******************************************************!*\
  !*** ./web/models/character/sections/backgrounds.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Backgrounds)\n/* harmony export */ });\n/* harmony import */ var _section__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../section */ \"./web/models/character/section.js\");\n/* harmony import */ var _elements_feature__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../elements/feature */ \"./web/elements/feature.js\");\n\n\nclass Backgrounds extends _section__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  constructor() {\n    var skeleton = {\n      primary: null,\n      secondary: null\n    };\n    super(skeleton);\n  }\n  static parse(json) {\n    var self = super.parse(json);\n    try {\n      self.primary = _elements_feature__WEBPACK_IMPORTED_MODULE_1__[\"default\"].parse(self.primary);\n      self.secondary = _elements_feature__WEBPACK_IMPORTED_MODULE_1__[\"default\"].parse(self.secondary);\n    } catch {\n      {\n        Error;\n      }\n    }\n    return self;\n  }\n  includes(id) {\n    return this.primary.id == id || this.secondary.id == id;\n  }\n  add(background, character) {\n    var available = _.find(Object.keys(this), f => this[f] == null);\n    this[available] = background;\n    if (this.primary != null & this.secondary != null) {\n      character.stats.boosts(this);\n      character.skills.auto(this);\n    }\n  }\n  remove(background) {\n    var occupied = _.find(Object.keys(this), f => this[f].id == background.id);\n    this[occupied] = null;\n  }\n  display() {\n    return this.displayFeature();\n  }\n}\n\n//# sourceURL=webpack://hubris-web/./web/models/character/sections/backgrounds.js?");

/***/ }),

/***/ "./web/models/character/sections/bio.js":
/*!**********************************************!*\
  !*** ./web/models/character/sections/bio.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Alignment: () => (/* binding */ Alignment),\n/* harmony export */   \"default\": () => (/* binding */ Bio)\n/* harmony export */ });\n/* harmony import */ var immer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! immer */ \"./node_modules/immer/dist/immer.mjs\");\n/* harmony import */ var _section__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../section */ \"./web/models/character/section.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_components_containers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/components/containers */ \"./web/components/components/containers.js\");\n/* harmony import */ var _components_components_text__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/components/text */ \"./web/components/components/text.js\");\n/* harmony import */ var _components_components_interactive__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/components/interactive */ \"./web/components/components/interactive.js\");\n\n\n\n\n\n\nclass Bio extends _section__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  [immer__WEBPACK_IMPORTED_MODULE_5__.immerable] = true;\n  constructor() {\n    var skeleton = {\n      name: \"\",\n      gender: \"\",\n      appearance: \"\",\n      backstory: \"\",\n      alignment: 'lg'\n    };\n    super(skeleton);\n  }\n  static parse(raw) {\n    var self = super.parse(raw);\n    self.name == \"\" && (self.name = \"Unnamed Character\");\n    return self;\n  }\n  FullBio({\n    obj,\n    handler\n  }) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_2__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Alignment, {\n      update: handler,\n      selected: obj.alignment,\n      below: true\n    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_2__.Item, {\n      label: \"name\",\n      below: true\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_text__WEBPACK_IMPORTED_MODULE_3__.Field, {\n      data: {\n        text: obj.name,\n        path: 'name'\n      },\n      handler: handler,\n      toggleable: true\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_2__.Item, {\n      label: \"gender\",\n      below: true\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_text__WEBPACK_IMPORTED_MODULE_3__.Field, {\n      data: {\n        text: obj.gender,\n        path: 'gender'\n      },\n      handler: handler,\n      toggleable: true\n    }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_2__.Item, {\n      label: \"appearance\",\n      below: true\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_text__WEBPACK_IMPORTED_MODULE_3__.Field, {\n      data: {\n        text: obj.appearance,\n        path: 'appearance'\n      },\n      handler: handler,\n      toggleable: true,\n      size: \"big\"\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_2__.Item, {\n      label: \"backstory\",\n      below: true\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_text__WEBPACK_IMPORTED_MODULE_3__.Field, {\n      data: {\n        text: obj.backstory,\n        path: 'backstory'\n      },\n      handler: handler,\n      toggleable: true,\n      size: \"big\"\n    })));\n  }\n  Bio({\n    ch,\n    patch = null\n  }) {\n    var update = patch('bio', 'update');\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_2__.Block, {\n      header: 'Bio'\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_2__.Item, {\n      label: 'name'\n    }, ch.name), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_2__.Item, {\n      label: 'class'\n    }, ch.classes.base.name), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_2__.Item, {\n      label: 'backgrounds'\n    }, ch.backgrounds.primary.name + ' & ' + ch.backgrounds.secondary.name), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Alignment, {\n      update: update,\n      selected: ch.bio.alignment\n    }));\n  }\n}\nfunction Alignment({\n  update,\n  selected,\n  below = false\n}) {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_2__.Item, {\n    below: below,\n    label: 'alignment'\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_interactive__WEBPACK_IMPORTED_MODULE_4__.Dropdown, {\n    name: 'alignment',\n    path: 'alignment',\n    data: ruleset.reference.alignments,\n    handler: update,\n    selected: selected\n  }));\n}\n\n//# sourceURL=webpack://hubris-web/./web/models/character/sections/bio.js?");

/***/ }),

/***/ "./web/models/character/sections/class.js":
/*!************************************************!*\
  !*** ./web/models/character/sections/class.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Classes)\n/* harmony export */ });\n/* harmony import */ var immer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! immer */ \"./node_modules/immer/dist/immer.mjs\");\n/* harmony import */ var _section__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../section */ \"./web/models/character/section.js\");\n/* harmony import */ var _elements_feature__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../elements/feature */ \"./web/elements/feature.js\");\n/* harmony import */ var _combat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./combat */ \"./web/models/character/sections/combat.js\");\n\n\n\n\nclass Classes extends _section__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  [immer__WEBPACK_IMPORTED_MODULE_3__.immerable] = true;\n  constructor() {\n    var skeleton = {\n      base: null\n    };\n    super(skeleton);\n  }\n  includes(id) {\n    return this.base.id == id;\n  }\n  static parse(raw) {\n    var self = super.parse(raw);\n    self.base = _elements_feature__WEBPACK_IMPORTED_MODULE_1__[\"default\"].parse(raw.base);\n    return self;\n  }\n  class_features() {\n    var ids = this.base.class_features.map(f => f.id);\n    var features = ids.map(i => ruleset.class_features[i]);\n    return features;\n  }\n  tag_features() {\n    var ids = this.base.tags.map(f => f.id);\n    var features = ruleset.tag_features.list().filter(f => ids.includes(f.tags.id));\n    return features;\n  }\n  effects() {\n    var tag_ids = this.base.tags.map(t => t.id);\n    var all = [];\n    tag_ids.forEach(id => {\n      var effects = ruleset.effects.list().filter(f => f.tags.map(t => t.id).includes(id));\n      all = all.concat(effects);\n    });\n    return all;\n  }\n  tags() {\n    var tag_ids = this.base.tags.map(t => t.id);\n    return tag_ids.map(t => ruleset.tags[t]);\n  }\n  add(feature, character) {\n    this.base = feature;\n    character.health.hd.die = this.base.hit_die;\n    character.powers.attr = this.base.attributes.name.slice(0, 3).toLowerCase();\n    character.tags = this.base.tags.map(t => ruleset.tags[t.id]);\n    character.combat.weapons = _combat__WEBPACK_IMPORTED_MODULE_2__.Arsenal.create({\n      value: this.base.weapon_proficiencies,\n      classname: this.base.name,\n      str: character.stats.scores.str.value,\n      dex: character.stats.scores.dex.value,\n      pb: character.progression.proficiency()\n    });\n    character.combat.armor = _combat__WEBPACK_IMPORTED_MODULE_2__.Armory.assemble({\n      cls: this.base.armor_proficiencies,\n      dex: character.stats.scores.dex.value,\n      pb: character.progression.proficiency()\n    });\n  }\n  remove(feature) {\n    this.base = null;\n  }\n}\n\n//# sourceURL=webpack://hubris-web/./web/models/character/sections/class.js?");

/***/ }),

/***/ "./web/models/character/sections/combat.js":
/*!*************************************************!*\
  !*** ./web/models/character/sections/combat.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Armor: () => (/* binding */ Armor),\n/* harmony export */   Armory: () => (/* binding */ Armory),\n/* harmony export */   Arsenal: () => (/* binding */ Arsenal),\n/* harmony export */   Weapon: () => (/* binding */ Weapon),\n/* harmony export */   \"default\": () => (/* binding */ Combat)\n/* harmony export */ });\n/* harmony import */ var _section__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../section */ \"./web/models/character/section.js\");\n/* harmony import */ var immer__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! immer */ \"./node_modules/immer/dist/immer.mjs\");\n/* harmony import */ var _components_components_containers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../components/components/containers */ \"./web/components/components/containers.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _components_components_text__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/components/text */ \"./web/components/components/text.js\");\n/* harmony import */ var _components_components_styles__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/components/styles */ \"./web/components/components/styles.js\");\n/* harmony import */ var _components_components_numbers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../components/components/numbers */ \"./web/components/components/numbers.js\");\n/* harmony import */ var _elements_feature__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../elements/feature */ \"./web/elements/feature.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _components_components_interactive__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../components/components/interactive */ \"./web/components/components/interactive.js\");\n\n\n\n\n\n\n\n\n\n\nclass Combat extends _section__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  [immer__WEBPACK_IMPORTED_MODULE_9__.immerable] = true;\n  constructor() {\n    var skeleton = {\n      armor: new Armory(),\n      weapons: new Arsenal(),\n      initiative: -2\n    };\n    super(skeleton);\n  }\n  static parse(raw, data) {\n    var self = super.parse(raw);\n    self.armor = Armory.parse(self.armor);\n    self.armor.list().forEach(item => {\n      item.ac = Armor.armor_class(item.value, data.dex, data.pb);\n    });\n    self.weapons = Arsenal.parse(self.weapons);\n    self.weapons.list().forEach(item => {\n      item.atk = Weapon.atk_bonus({\n        str: data.str,\n        dex: data.dex,\n        charclass: data.classname,\n        pb: data.pb\n      });\n    });\n    return self;\n  }\n  Combat({\n    patch,\n    combat\n  }) {\n    var swap = patch('combat', 'radioSwitch');\n    var namer = patch('combat', 'update');\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_1__.Block, {\n      header: 'Combat'\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(combat.armor.Armor, {\n      armory: combat.armor,\n      swap: swap\n    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(Arsenal.Weaponry, {\n      weapons: combat.weapons,\n      namer: namer,\n      swap: swap\n    }));\n  }\n}\nclass Armor extends _section__WEBPACK_IMPORTED_MODULE_0__.Item {\n  [immer__WEBPACK_IMPORTED_MODULE_9__.immerable] = true;\n  constructor() {\n    super();\n  }\n  static create({\n    value,\n    index,\n    dex,\n    proficiency\n  }) {\n    var self = new Armor();\n    self.index = index;\n    self.value = value;\n    self.ac = Armor.armor_class(value, dex, proficiency);\n    self.active = false;\n    return self;\n  }\n  static parse(raw) {\n    var self = new Armor();\n    Object.assign(self, raw);\n    return self;\n  }\n  static armor_class(value, dex, pb) {\n    var cls = 0;\n    value == 'None' && (cls = 10 + dex);\n    value == 'Light' && (cls = 10 + dex + pb);\n    value == 'Medium' && (cls = 14 + pb);\n    value == 'Heavy' && (cls = 18 + pb);\n    return cls;\n  }\n  static ArmorClass({\n    armor\n  }) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_numbers__WEBPACK_IMPORTED_MODULE_5__.DC, {\n      item: {\n        label: 'Armor Class',\n        value: armor.ac\n      }\n    });\n  }\n}\nclass Armory {\n  [immer__WEBPACK_IMPORTED_MODULE_9__.immerable] = true;\n  constructor() {\n    this[0] = null;\n  }\n  static assemble({\n    cls,\n    dex,\n    pb\n  }) {\n    var self = new Armory();\n    var avail = Armory.get_armors(cls);\n    for (var i = 0; i < avail.length; i++) {\n      self[i] = Armor.create({\n        value: avail[i],\n        index: i,\n        dex: dex,\n        proficiency: pb\n      });\n    }\n    self[0].active = true;\n    return self;\n  }\n  set_acs(dex, pb) {\n    this.list().forEach(item => {\n      item.ac = Armor.armor_class(item.value, dex, pb);\n    });\n  }\n  static parse(raw) {\n    var self = new Armory();\n    Object.keys(raw).forEach(r => {\n      self[r] = Armor.parse(raw[r]);\n    });\n    return self;\n  }\n  list() {\n    return Object.values(this);\n  }\n  wearing() {\n    return lodash__WEBPACK_IMPORTED_MODULE_7___default().find(this.list(), f => f.active);\n  }\n  static get_armors(value) {\n    var avail = ['None'];\n    value == 'Light' && (avail = ['None', 'Light']);\n    value == 'Medium' && (avail = ['None', 'Light', 'Medium']);\n    value == 'Heavy' && (avail = ['None', 'Light', 'Medium', 'Heavy']);\n    return avail;\n  }\n  Armor({\n    armory,\n    swap\n  }) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment), null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_1__.LabeledItem, {\n      label: 'Armor',\n      className: (0,_components_components_styles__WEBPACK_IMPORTED_MODULE_4__.style)('armor', {\n        width: 'auto !important'\n      })\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_interactive__WEBPACK_IMPORTED_MODULE_8__.Radio, {\n      label: \"armor\",\n      data: armory.list().map(armor => new Object({\n        path: 'armor',\n        value: armor.value,\n        selected: armor.active,\n        label: armor.value\n      })),\n      onChange: swap,\n      readonly: false,\n      vertical: false\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(Armor.ArmorClass, {\n      armor: armory.wearing()\n    }));\n  }\n}\nclass Weapon extends _section__WEBPACK_IMPORTED_MODULE_0__.Item {\n  [immer__WEBPACK_IMPORTED_MODULE_9__.immerable] = true;\n  constructor() {\n    super();\n    this.name = \"\";\n    this.active = false;\n    this.value = \"\";\n    this.atk = \"\";\n    this.dmg = {\n      type: new _section__WEBPACK_IMPORTED_MODULE_0__.RadioArray({\n        keys: ['bludgeoning', 'piercing', 'slashing'],\n        values: ['Bludgeoning', 'Piercing', 'Slashing'],\n        defaultActive: 'bludgeoning'\n      })\n    };\n    this.weight = new _section__WEBPACK_IMPORTED_MODULE_0__.RadioArray({\n      keys: ['light', 'heavy'],\n      values: ['Light', 'Heavy'],\n      defaultActive: 'light'\n    });\n  }\n  static create({\n    value,\n    classname,\n    str,\n    dex,\n    pb\n  }) {\n    var self = new Weapon();\n    self.name = 'untitled';\n    self.active = false;\n    self.value = value;\n    self.dmg.amount = value == 'Martial' ? '2d6' : '1d6', self.atk = Weapon.atk_bonus({\n      str: str,\n      dex: dex,\n      classname: classname,\n      pb: pb\n    });\n    return self;\n  }\n  static parse(raw) {\n    var self = new Weapon();\n    Object.assign(self, raw);\n    self.weight = _section__WEBPACK_IMPORTED_MODULE_0__.RadioArray.parse(raw.weight);\n    self.dmg.type = _section__WEBPACK_IMPORTED_MODULE_0__.RadioArray.parse(raw.dmg.type);\n    return self;\n  }\n  quick() {\n    return this.weight.light.active ? 7 : 10;\n  }\n  slow() {\n    return this.weight.heavy.active ? 13 : 10;\n  }\n  static atk_bonus({\n    str,\n    dex,\n    charclass,\n    pb\n  }) {\n    return ['Rogue', 'Sharpshooter'].includes(charclass) ? dex + pb : str + pb;\n  }\n  static Weapon({\n    wpn,\n    namer,\n    onChange\n  }) {\n    const addtl = {\n      fontFamily: _components_components_styles__WEBPACK_IMPORTED_MODULE_4__.styles.mono,\n      fontWeight: 'bold',\n      fontSize: _components_components_styles__WEBPACK_IMPORTED_MODULE_4__.styles.size + 3\n    };\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_1__.Snippet, {\n      snip: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_text__WEBPACK_IMPORTED_MODULE_3__.CheckboxItem, {\n        handler: onChange,\n        styles: addtl,\n        hideValue: true,\n        name: 'weapons',\n        item: {\n          value: wpn.value,\n          path: 'weapons'\n        },\n        checked: wpn.active\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_text__WEBPACK_IMPORTED_MODULE_3__.Field, {\n        data: {\n          text: `Weapon ${wpn.index}`,\n          path: `weapons.${wpn.index}.name`\n        },\n        handler: namer,\n        toggleable: true\n      }))\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_elements_feature__WEBPACK_IMPORTED_MODULE_6__.DataGrid, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_elements_feature__WEBPACK_IMPORTED_MODULE_6__.FeatureInfo, {\n      label: 'Damage'\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_text__WEBPACK_IMPORTED_MODULE_3__.SmallMod, {\n      value: wpn.dmg.amount\n    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(wpn.dmg.type.Radio, {\n      aray: wpn.dmg.type,\n      path: `weapons.${wpn.index}.dmg.type`,\n      handler: onChange,\n      group: 'damageType'\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_elements_feature__WEBPACK_IMPORTED_MODULE_6__.FeatureInfo, {\n      label: 'Bonus'\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_text__WEBPACK_IMPORTED_MODULE_3__.SmallMod, {\n      value: wpn.atk\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_elements_feature__WEBPACK_IMPORTED_MODULE_6__.FeatureInfo, {\n      label: 'Class'\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_text__WEBPACK_IMPORTED_MODULE_3__.Metadata, {\n      text: wpn.value\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_elements_feature__WEBPACK_IMPORTED_MODULE_6__.FeatureInfo, {\n      label: 'Heft'\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(wpn.weight.Radio, {\n      aray: wpn.weight,\n      path: `weapons.${wpn.index}.weight`,\n      handler: onChange,\n      group: 'heft'\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_elements_feature__WEBPACK_IMPORTED_MODULE_6__.FeatureInfo, {\n      label: \"Speed\"\n    }, \"Quick: \", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_text__WEBPACK_IMPORTED_MODULE_3__.SmallMod, {\n      value: wpn.quick()\n    }), \"Slow: \", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_text__WEBPACK_IMPORTED_MODULE_3__.SmallMod, {\n      value: wpn.slow()\n    }))));\n  }\n  static Attack({\n    wpn\n  }) {\n    if (wpn.active) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_1__.LabeledItem, {\n        label: 'Attack'\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"label\", null, \"Bonus\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_text__WEBPACK_IMPORTED_MODULE_3__.SmallMod, {\n        value: wpn.atk\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"label\", null, \"Damage\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_text__WEBPACK_IMPORTED_MODULE_3__.SmallMod, {\n        value: wpn.dmg.amount\n      }));\n    }\n  }\n}\nclass Arsenal {\n  [immer__WEBPACK_IMPORTED_MODULE_9__.immerable] = true;\n  constructor() {\n    this[0] = new Weapon();\n  }\n  set_bonuses(str, dex, classname, pb) {\n    this.list().forEach(item => {\n      item.atk = Weapon.atk_bonus(str, dex, classname, pb);\n    });\n  }\n  static create({\n    value,\n    classname,\n    str,\n    dex,\n    pb\n  }) {\n    var self = new Arsenal();\n    var avail = self.get_weapons(value);\n    var wpns = avail.map(a => Weapon.create({\n      value: a,\n      dex: dex,\n      str: str,\n      classname: classname,\n      pb: pb\n    }));\n    var indices = lodash__WEBPACK_IMPORTED_MODULE_7___default().range(avail.length);\n    Object.assign(self, new _section__WEBPACK_IMPORTED_MODULE_0__.RadioArray({\n      keys: indices,\n      values: wpns,\n      defaultActive: 0\n    }));\n    return self;\n  }\n  static parse(raw) {\n    var self = new Arsenal();\n    Object.assign(self, _section__WEBPACK_IMPORTED_MODULE_0__.RadioArray.parse(raw));\n    Object.keys(self).forEach(key => {\n      self[key] = Weapon.parse(self[key]);\n    });\n    return self;\n  }\n  get_weapons(value) {\n    return value == ['Simple'] ? ['Simple'] : ['Simple', 'Martial'];\n  }\n  list() {\n    return Object.values(this);\n  }\n  wielding() {\n    return lodash__WEBPACK_IMPORTED_MODULE_7___default().find(this.list(), r => r.active);\n  }\n  static Weaponry({\n    weapons,\n    namer,\n    swap\n  }) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_1__.LabeledItem, {\n      label: 'Weapons'\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_1__.OptionList, null, weapons.list().map(wpn => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(Weapon.Weapon, {\n      namer: namer,\n      wpn: wpn,\n      onChange: swap\n    }))));\n  }\n}\n\n//# sourceURL=webpack://hubris-web/./web/models/character/sections/combat.js?");

/***/ }),

/***/ "./web/models/character/sections/features.js":
/*!***************************************************!*\
  !*** ./web/models/character/sections/features.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Features)\n/* harmony export */ });\n/* harmony import */ var _section__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../section */ \"./web/models/character/section.js\");\n/* harmony import */ var immer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! immer */ \"./node_modules/immer/dist/immer.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_components_styles__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/components/styles */ \"./web/components/components/styles.js\");\n/* harmony import */ var _elements_sorts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../elements/sorts */ \"./web/elements/sorts.js\");\n/* harmony import */ var _components_components_containers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/components/containers */ \"./web/components/components/containers.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\n\nclass Features extends _section__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  [immer__WEBPACK_IMPORTED_MODULE_6__.immerable] = true;\n  constructor() {\n    var skeleton = {\n      class_features: new _elements_sorts__WEBPACK_IMPORTED_MODULE_3__.Groups([]),\n      tag_features: new _elements_sorts__WEBPACK_IMPORTED_MODULE_3__.Groups([]),\n      backgrounds: new _elements_sorts__WEBPACK_IMPORTED_MODULE_3__.Groups([])\n    };\n    super(skeleton);\n  }\n  static parse(raw, backgrounds) {\n    var self = super.parse(raw);\n    self.class_features = _elements_sorts__WEBPACK_IMPORTED_MODULE_3__.Groups.parse(self.class_features);\n    self.tag_features = _elements_sorts__WEBPACK_IMPORTED_MODULE_3__.Groups.parse(self.tag_features);\n    self.backgrounds = new _elements_sorts__WEBPACK_IMPORTED_MODULE_3__.Groups([backgrounds.primary, backgrounds.secondary]);\n    return self;\n  }\n  add(feature) {\n    this[feature.table].add(feature);\n    return feature.xp;\n  }\n  includes(feature) {\n    return this[feature.table].includes(feature);\n  }\n  regroup(action) {\n    action.path.includes('.') && (action.path = action.path.split(\".\").slice(1).join('.'));\n    lodash__WEBPACK_IMPORTED_MODULE_5___default().get(this, action.path).regroup(action.data.value);\n  }\n  display({\n    patch\n  }) {\n    function Features({\n      features,\n      binner\n    }) {\n      const styled = (0,_components_components_styles__WEBPACK_IMPORTED_MODULE_2__.style)('features', {\n        maxHeight: 260,\n        overflow: 'scroll',\n        '& > div': {\n          marginBottom: 5\n        }\n      });\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_4__.Block, {\n        header: 'Features',\n        className: styled\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_4__.Tabbed, {\n        names: ['Class', 'Tag', 'Background']\n      }, features.class_features.display({\n        asOption: false,\n        binner: binner\n      }), features.tag_features.display({\n        asOption: false,\n        binner: binner\n      }), features.backgrounds.display({\n        asOption: false,\n        binner: binner\n      })));\n    }\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Features, {\n      features: this,\n      binner: patch('features', 'regroup')\n    });\n  }\n}\n\n//# sourceURL=webpack://hubris-web/./web/models/character/sections/features.js?");

/***/ }),

/***/ "./web/models/character/sections/health.js":
/*!*************************************************!*\
  !*** ./web/models/character/sections/health.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HD: () => (/* binding */ HD),\n/* harmony export */   \"default\": () => (/* binding */ Health)\n/* harmony export */ });\n/* harmony import */ var _section__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../section */ \"./web/models/character/section.js\");\n/* harmony import */ var immer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! immer */ \"./node_modules/immer/dist/immer.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_components_containers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/components/containers */ \"./web/components/components/containers.js\");\n/* harmony import */ var _components_components_interactive__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/components/interactive */ \"./web/components/components/interactive.js\");\n/* harmony import */ var _components_components_text__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/components/text */ \"./web/components/components/text.js\");\n/* harmony import */ var _components_components_numbers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../components/components/numbers */ \"./web/components/components/numbers.js\");\n/* harmony import */ var _components_components_styles__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../components/components/styles */ \"./web/components/components/styles.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\n\n\n\n\n\n\nclass Health extends _section__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  [immer__WEBPACK_IMPORTED_MODULE_8__.immerable] = true;\n  constructor() {\n    var skeleton = {\n      injury: 'uninjured',\n      conditions: null,\n      hp: {\n        max: 1,\n        current: 1\n      },\n      hd: new HitDice()\n    };\n    super(skeleton);\n  }\n  static parse(raw) {\n    var self = super.parse(raw);\n    self.hd = HitDice.parse(raw.hd);\n    self.hp.max = self.hd.max_hp();\n    return self;\n  }\n  increment(action) {\n    Object.keys(action).includes('context') ? lodash__WEBPACK_IMPORTED_MODULE_7___default().get(this, action.path).increment(action.context.progression.xp, action.context.classes.base.name) : super.increment(action);\n  }\n  decrement(action) {\n    Object.keys(action).includes('context') ? lodash__WEBPACK_IMPORTED_MODULE_7___default().get(this, action.path).decrement(action.context.progression.xp, action.context.classes.base.name) : super.decrement(action);\n  }\n  display({\n    patch\n  }) {\n    function Health({\n      health,\n      patch\n    }) {\n      const injuries = patch('health', 'update');\n      const hp = [patch('health', 'increment'), patch('health', 'decrement')];\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_2__.Block, {\n        header: 'Health'\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(HP, {\n        hp: health.hp,\n        update: hp\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_2__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_2__.LabeledItem, {\n        label: 'injuries'\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Injuries, {\n        injury: health.injury,\n        update: injuries\n      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_2__.LabeledItem, {\n        label: 'conditions'\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_text__WEBPACK_IMPORTED_MODULE_4__.Textbox, {\n        data: health.conditions,\n        id: 'conditions',\n        handler: injuries\n      }))), health.hd.displayTracker({\n        update: hp\n      }));\n    }\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Health, {\n      health: this,\n      patch: patch\n    });\n  }\n}\nclass HitDice {\n  [immer__WEBPACK_IMPORTED_MODULE_8__.immerable] = true;\n  constructor() {\n    this.die = 'd2', this.max = 1, this.used = 1;\n  }\n  static parse(raw) {\n    var self = new HitDice();\n    self.die = raw.die;\n    self.max = raw.max;\n    self.used = raw.used;\n    return self;\n  }\n  max_hp() {\n    var base = Number(this.die.split('d').at(-1));\n    Number(this.die.split('d')[0]) == 2 && (base = base * 2);\n    return base;\n  }\n  cost(cls) {\n    var initial = ruleset.reference.base_hit_die_cost[cls];\n    return initial + (this.max - 1);\n  }\n  increment(xp, cls) {\n    var cost = this.cost(cls);\n    if (xp.earned - xp.spent >= cost) {\n      this.max += 1;\n      xp.spent += cost;\n    }\n  }\n  decrement(xp, cls) {\n    var cost = this.cost(cls) * -1;\n    if (this.max > 1) {\n      this.max -= 1;\n      xp.spent += cost;\n    }\n  }\n  displayOption({\n    update\n  }) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(HD, {\n      hd: this,\n      update: update,\n      isOption: true\n    });\n  }\n  displayTracker({\n    update\n  }) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(HD, {\n      hd: this,\n      update: update,\n      isOption: false\n    });\n  }\n}\nfunction HD({\n  hd,\n  update,\n  isOption\n}) {\n  var styled = (0,_components_components_styles__WEBPACK_IMPORTED_MODULE_6__.style)('hd', {\n    border: _components_components_styles__WEBPACK_IMPORTED_MODULE_6__.styles.border,\n    '& > div': {\n      borderTop: 'none',\n      borderLeft: 'none',\n      borderRight: 'none',\n      margin: 0\n    }\n  });\n  var data = ruleset.reference.hd.map(h => new Object({\n    label: h,\n    value: h,\n    selected: h == hd.die,\n    available: false\n  }));\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", {\n    className: styled\n  }, isOption ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_numbers__WEBPACK_IMPORTED_MODULE_5__.Counter, {\n    item: {\n      label: 'hit dice',\n      value: hd.max,\n      min: 0,\n      readOnly: false,\n      path: 'hd'\n    },\n    update: update\n  }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_numbers__WEBPACK_IMPORTED_MODULE_5__.Tracker, {\n    header: 'Hit Dice',\n    left: {\n      label: 'used',\n      value: hd.used,\n      max: hd.max,\n      min: 0,\n      readOnly: false,\n      path: 'hd.used'\n    },\n    right: {\n      label: 'max',\n      value: hd.max,\n      readOnly: true,\n      path: 'hd.max'\n    },\n    update: update\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_interactive__WEBPACK_IMPORTED_MODULE_3__.Radio, {\n    label: 'hit die',\n    data: data,\n    readonly: true\n  }));\n}\nfunction HP({\n  hp,\n  update\n}) {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_numbers__WEBPACK_IMPORTED_MODULE_5__.Tracker, {\n    header: 'HP',\n    left: {\n      label: 'current',\n      value: hp.current,\n      max: hp.max,\n      min: 0,\n      readOnly: false,\n      path: \"hp.current\"\n    },\n    right: {\n      label: 'max',\n      value: hp.max,\n      readOnly: true,\n      path: 'hp.max'\n    },\n    update: update\n  });\n}\nfunction Injuries({\n  injury,\n  update\n}) {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_interactive__WEBPACK_IMPORTED_MODULE_3__.Dropdown, {\n    name: \"injury\",\n    path: 'injury',\n    data: ruleset.reference.injuries,\n    handler: update,\n    selected: injury\n  });\n}\n\n//# sourceURL=webpack://hubris-web/./web/models/character/sections/health.js?");

/***/ }),

/***/ "./web/models/character/sections/powers.js":
/*!*************************************************!*\
  !*** ./web/models/character/sections/powers.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Powers)\n/* harmony export */ });\n/* harmony import */ var _section__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../section */ \"./web/models/character/section.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_components_containers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/components/containers */ \"./web/components/components/containers.js\");\n/* harmony import */ var _components_components_styles__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/components/styles */ \"./web/components/components/styles.js\");\n/* harmony import */ var _components_components_numbers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/components/numbers */ \"./web/components/components/numbers.js\");\n/* harmony import */ var _elements_sorts__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../elements/sorts */ \"./web/elements/sorts.js\");\n\n\n\n\n\n\nclass Powers extends _section__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  constructor() {\n    var skeleton = {\n      effects: new _elements_sorts__WEBPACK_IMPORTED_MODULE_5__.Groups([]),\n      metadata: {\n        ranges: new _elements_sorts__WEBPACK_IMPORTED_MODULE_5__.Groups([]),\n        durations: new _elements_sorts__WEBPACK_IMPORTED_MODULE_5__.Groups([])\n      },\n      used: 0,\n      attr: null\n    };\n    super(skeleton);\n  }\n  dc() {\n    return 10 + this.used;\n  }\n  static parse(raw, data) {\n    var self = super.parse(raw);\n    self.effects = _elements_sorts__WEBPACK_IMPORTED_MODULE_5__.Groups.parse(self.effects);\n    self.metadata.ranges = _elements_sorts__WEBPACK_IMPORTED_MODULE_5__.Groups.parse(self.metadata.ranges);\n    self.metadata.durations = _elements_sorts__WEBPACK_IMPORTED_MODULE_5__.Groups.parse(self.metadata.durations);\n    self.attr = data.attr.name.slice(0, 3).toLowerCase();\n    self.mod = data.pb + data.scores[self.attr].value;\n    return self;\n  }\n  display({\n    patch\n  }) {\n    function Powers({\n      powers,\n      patch\n    }) {\n      const disp = (0,_components_components_styles__WEBPACK_IMPORTED_MODULE_3__.style)('powers', {\n        maxHeight: 260,\n        overflow: 'scroll'\n      });\n      const handlers = [patch('powers', 'increment'), patch('powers', 'decrement')];\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_2__.Block, {\n        header: 'Powers',\n        className: disp\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_2__.Row, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_numbers__WEBPACK_IMPORTED_MODULE_4__.Bonus, {\n        item: {\n          label: 'Power Mod',\n          value: powers.mod\n        }\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_numbers__WEBPACK_IMPORTED_MODULE_4__.DC, {\n        item: {\n          label: 'Power DC',\n          value: powers.dc()\n        }\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_numbers__WEBPACK_IMPORTED_MODULE_4__.Counter, {\n        update: handlers,\n        item: {\n          label: 'Powers Used',\n          value: powers.used,\n          path: \"used\",\n          readOnly: false\n        }\n      })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_2__.OptionList, null, powers.effects.map(f => f.displayFeature({\n        ranges: powers.metadata.ranges,\n        durations: powers.metadata.durations\n      }))));\n    }\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Powers, {\n      powers: this,\n      patch: patch\n    });\n  }\n}\n\n//# sourceURL=webpack://hubris-web/./web/models/character/sections/powers.js?");

/***/ }),

/***/ "./web/models/character/sections/progression.js":
/*!******************************************************!*\
  !*** ./web/models/character/sections/progression.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Tier: () => (/* binding */ Tier),\n/* harmony export */   \"default\": () => (/* binding */ Progression)\n/* harmony export */ });\n/* harmony import */ var _section__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../section */ \"./web/models/character/section.js\");\n/* harmony import */ var immer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! immer */ \"./node_modules/immer/dist/immer.mjs\");\n/* harmony import */ var _components_components_containers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../components/components/containers */ \"./web/components/components/containers.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _components_components_interactive__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/components/interactive */ \"./web/components/components/interactive.js\");\n/* harmony import */ var _components_components_numbers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/components/numbers */ \"./web/components/components/numbers.js\");\n/* harmony import */ var _components_components_styles__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../components/components/styles */ \"./web/components/components/styles.js\");\n\n\n\n\n\n\n\nclass Progression extends _section__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  [immer__WEBPACK_IMPORTED_MODULE_6__.immerable] = true;\n  constructor() {\n    var skeleton = {\n      xp: {\n        earned: 6,\n        spent: 0\n      }\n    };\n    super(skeleton);\n  }\n  tier() {\n    if (_.range(-1, 30).includes(this.xp.earned)) {\n      return 1;\n    } else if (_.range(30, 75).includes(this.xp.earned)) {\n      return 2;\n    } else if (_.range(75, 125).includes(this.xp.earned)) {\n      return 3;\n    } else {\n      return 4;\n    }\n  }\n  proficiency() {\n    return this.tier() + 1;\n  }\n  static parse(raw) {\n    return super.parse(raw);\n  }\n  Progression({\n    progression,\n    patch\n  }) {\n    const [inc, dec] = [patch('progression', 'increment'), patch('progression', 'decrement')];\n    const tier = progression.tier();\n    const proficiency = progression.proficiency();\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(Block, {\n      header: 'Progression'\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", {\n      style: {\n        display: 'inline-flex'\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(XP, {\n      xp: progression.xp,\n      tier: tier,\n      update: [inc, dec]\n    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(Proficiency, {\n      pro: proficiency\n    })));\n  }\n}\nfunction Tier({\n  tier,\n  update = null\n}) {\n  var d = [1, 2, 3, 4].map(item => new Object({\n    label: item,\n    value: item,\n    selected:  true && tier == item\n  }));\n  console.log(d);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_1__.Item, {\n    label: 'tier'\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_interactive__WEBPACK_IMPORTED_MODULE_3__.Radio, {\n    label: 'tier',\n    data: d,\n    onChange: update,\n    readonly: true,\n    vertical: false\n  }));\n}\nfunction XP({\n  xp,\n  tier,\n  update\n}) {\n  var styled = (0,_components_components_styles__WEBPACK_IMPORTED_MODULE_5__.style)('hd', {\n    border: _components_components_styles__WEBPACK_IMPORTED_MODULE_5__.styles.border,\n    '& > div': {\n      borderTop: 'none',\n      borderLeft: 'none',\n      borderRight: 'none',\n      margin: 0\n    }\n  });\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", {\n    className: styled\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_numbers__WEBPACK_IMPORTED_MODULE_4__.Tracker, {\n    header: 'XP',\n    right: {\n      value: xp.spent,\n      label: 'spent',\n      path: 'xp.spent',\n      readOnly: true\n    },\n    left: {\n      value: xp.earned,\n      min: xp.spent,\n      label: 'earned',\n      path: 'xp.earned',\n      readOnly: false\n    },\n    update: update\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(Tier, {\n    tier: tier\n  }));\n}\nfunction Proficiency({\n  pro\n}) {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_numbers__WEBPACK_IMPORTED_MODULE_4__.Bonus, {\n    override: {\n      marginTop: 0 + ' !important',\n      marginBottom: 0 + ' !important'\n    },\n    item: {\n      label: 'proficiency',\n      value: pro,\n      readonly: true\n    }\n  });\n}\n\n//# sourceURL=webpack://hubris-web/./web/models/character/sections/progression.js?");

/***/ }),

/***/ "./web/models/character/sections/skills.js":
/*!*************************************************!*\
  !*** ./web/models/character/sections/skills.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Skills)\n/* harmony export */ });\n/* harmony import */ var immer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! immer */ \"./node_modules/immer/dist/immer.mjs\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_components_styles__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/components/styles */ \"./web/components/components/styles.js\");\n/* harmony import */ var _components_components_text__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/components/text */ \"./web/components/components/text.js\");\n/* harmony import */ var _components_components_containers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/components/containers */ \"./web/components/components/containers.js\");\n\n\n\n\n\n\nclass Skills extends Array {\n  [immer__WEBPACK_IMPORTED_MODULE_5__.immerable] = true;\n  constructor() {\n    super();\n    for (var i of lodash__WEBPACK_IMPORTED_MODULE_0___default().range(0, 18)) {\n      this[i] = ruleset.skills.list()[i];\n    }\n  }\n  static parse(skills, data) {\n    var self = new Skills();\n    if (skills.length < 18) {\n      var profs = skills.map(e => e.id);\n      self.forEach(skill => {\n        profs.includes(skill.id) && (skill.proficient = true);\n      });\n    } else {\n      for (var i = 0; i < skills.length; i++) {\n        if (skills[i].proficient) {\n          self[i].proficient = true;\n        }\n      }\n    }\n    self.bonuses(data.scores, data.pb);\n    return self;\n  }\n  bonuses(scores, pb) {\n    console.log(scores, pb);\n    this.forEach(skill => scores.skill_bonus(skill, pb));\n  }\n  auto(backgrounds) {\n    backgrounds.primary.skills.length > 0 && (lodash__WEBPACK_IMPORTED_MODULE_0___default().find(this, i => i.id == backgrounds.primary.skills[0].id).proficient = true);\n    backgrounds.secondary.skills.length > 0 && (lodash__WEBPACK_IMPORTED_MODULE_0___default().find(this, i => i.id == backgrounds.secondary.skills[0].id).proficient = true);\n  }\n  addDrop(action) {\n    var target = lodash__WEBPACK_IMPORTED_MODULE_0___default().find(this, i => i.id == action.data.value);\n    action.data.checked ? target.select(action.context.stats.scores.int, action.context.skills, action.context.progression) : target.deselect(action.context.stats.scores.int, action.context.skills, action.context.progression);\n  }\n  by_attribute() {\n    let v = {};\n    var codes = [...new Set(this.map(t => t.code))];\n    codes.forEach(code => {\n      v[code] = lodash__WEBPACK_IMPORTED_MODULE_0___default().filter(this, c => c.code == code);\n    });\n    return v;\n  }\n  display({\n    handler\n  }) {\n    function Skills({\n      skills,\n      handler\n    }) {\n      const display = (0,_components_components_styles__WEBPACK_IMPORTED_MODULE_2__.style)('skills', {\n        display: 'grid',\n        gridTemplateColumns: 'repeat(3, auto)'\n      });\n      var groups = skills.by_attribute();\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", {\n        className: display\n      }, Object.keys(groups).map(group => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_4__.LabeledItem, {\n        label: group\n      }, groups[group].map(g => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_components_text__WEBPACK_IMPORTED_MODULE_3__.CheckboxItem, {\n        hideValue: true,\n        checked: g.proficient,\n        item: {\n          label: g.name,\n          value: g.id\n        },\n        handler: handler\n      })))));\n    }\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(Skills, {\n      skills: this,\n      handler: handler\n    });\n  }\n}\n\n//# sourceURL=webpack://hubris-web/./web/models/character/sections/skills.js?");

/***/ }),

/***/ "./web/models/character/sections/stats.js":
/*!************************************************!*\
  !*** ./web/models/character/sections/stats.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Stats)\n/* harmony export */ });\n/* harmony import */ var _section__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../section */ \"./web/models/character/section.js\");\n/* harmony import */ var immer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! immer */ \"./node_modules/immer/dist/immer.mjs\");\n/* harmony import */ var _components_components_containers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../components/components/containers */ \"./web/components/components/containers.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _components_components_numbers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/components/numbers */ \"./web/components/components/numbers.js\");\n/* harmony import */ var _components_components_styles__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/components/styles */ \"./web/components/components/styles.js\");\n\n\n\n\n\n\nclass Stats extends _section__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  [immer__WEBPACK_IMPORTED_MODULE_5__.immerable] = true;\n  constructor() {\n    super();\n    this.points = 28;\n    this.scores = {};\n    ruleset.reference.skill_codes.forEach(code => {\n      this.scores[code] = new AbilityScore(code);\n    });\n  }\n  static parse(raw) {\n    var self = super.parse(raw);\n    Object.keys(self.scores).forEach(score => {\n      self.scores[score] = AbilityScore.parse(raw.scores[score]);\n    });\n    return self;\n  }\n  skill_bonus(skill, pb) {\n    this.scores[skill.code].bonus(skill, pb);\n  }\n  increment(action) {\n    var target = _.get(this, action.path);\n    var cost = target.increment(this.points);\n    if (cost != false) {\n      this.points -= cost;\n    }\n  }\n  decrement(action) {\n    var target = _.get(this, action.path);\n    var cost = target.decrement(this.points);\n    if (cost != false) {\n      this.points -= cost;\n    }\n  }\n  boosts(backgrounds) {\n    var bg1, bg2;\n    if (Array.isArray(backgrounds)) {\n      bg1 = backgrounds[0];\n      bg2 = backgrounds[1];\n    } else {\n      bg1 = backgrounds.primary;\n      bg2 = backgrounds.secondary;\n    }\n    if (bg1 != null && bg2 != null) {\n      this.scores[bg1.attributes.name.slice(0, 3).toLowerCase()].boostify();\n      this.scores[bg2.attributes.name.slice(0, 3).toLowerCase()].boostify();\n    }\n  }\n  displayAllocate(update) {\n    function Stats({\n      stats,\n      update\n    }) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_numbers__WEBPACK_IMPORTED_MODULE_3__.DC, {\n        item: {\n          label: 'Remaining',\n          value: stats.points\n        }\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", {\n        style: {\n          display: 'grid',\n          gridTemplateColumns: 'repeat(3, auto)'\n        }\n      }, Object.keys(stats.scores).map(code => stats.scores[code].display(update))));\n    }\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(Stats, {\n      stats: this,\n      update: update\n    });\n  }\n  StatsSkills({\n    stats,\n    skills\n  }) {\n    var grouped = skills.by_attribute();\n    Object.keys(grouped).forEach(code => {\n      grouped[code].bonus = stats.scores[code].value;\n    });\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_1__.Block, {\n      header: 'Stats',\n      className: (0,_components_components_styles__WEBPACK_IMPORTED_MODULE_4__.style)(\"stat\", {\n        display: 'grid',\n        gridTemplateColumns: '50% 50%',\n        '& div': {\n          width: 'auto'\n        }\n      })\n    }, Object.keys(grouped).map(code => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_1__.Border, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_numbers__WEBPACK_IMPORTED_MODULE_3__.Bonus, {\n      item: {\n        value: grouped[code].bonus,\n        label: code,\n        id: code\n      }\n    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_containers__WEBPACK_IMPORTED_MODULE_1__.OptionList, null, grouped[code].map(c => c.display()))))));\n  }\n}\nclass AbilityScore {\n  [immer__WEBPACK_IMPORTED_MODULE_5__.immerable] = true;\n  constructor(code, value = -2) {\n    this.code = code;\n    this.value = value;\n    this.max = 4;\n    this.min = -2;\n  }\n  static parse(ob) {\n    var self = new AbilityScore(ob.code);\n    Object.assign(self, ob);\n    if (self.max == 5) {\n      self.cost = function (value = this.value) {\n        var mapping = {\n          '-1': 0,\n          '0': 1,\n          '1': 2,\n          '2': 3,\n          '3': 5,\n          '4': 8,\n          '5': 12\n        };\n        return mapping[value];\n      };\n    }\n    return self;\n  }\n  cost(value = this.value) {\n    var mapping = {\n      \"-2\": 0,\n      \"-1\": 1,\n      \"0\": 2,\n      \"1\": 3,\n      \"2\": 5,\n      \"3\": 8,\n      \"4\": 12\n    };\n    return mapping[value];\n  }\n  affordable(points, cost) {\n    if (points - cost > -1 || points - cost > 29) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  boostify() {\n    this.max = 5;\n    this.min = -1;\n    this.value += 1;\n    this.cost = function (value = this.value) {\n      var mapping = {\n        '-1': 0,\n        '0': 1,\n        '1': 2,\n        '2': 3,\n        '3': 5,\n        '4': 8,\n        '5': 12\n      };\n      return mapping[value];\n    };\n  }\n  increment(points) {\n    console.log(this.cost());\n    if (this.value < this.max) {\n      var net_cost = Math.abs(this.cost() - this.cost(this.value + 1));\n      if (this.affordable(points, net_cost)) {\n        this.value += 1;\n        return net_cost;\n      }\n    }\n    return false;\n  }\n  bonus(skill, pb) {\n    if (skill.proficient) {\n      skill.bonus = this.value + pb;\n    } else {\n      skill.bonus = this.value;\n    }\n  }\n  decrement(points) {\n    if (this.value > this.min) {\n      var net_cost = -1 * Math.abs(this.cost() - this.cost(this.value - 1));\n      if (this.affordable(points, net_cost)) {\n        this.value -= 1;\n        return net_cost;\n      }\n    }\n    return false;\n  }\n  display(handler) {\n    function Stat({\n      label,\n      value,\n      handler\n    }) {\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_components_components_numbers__WEBPACK_IMPORTED_MODULE_3__.Counter, {\n        item: {\n          label: label,\n          value: value,\n          path: `scores.${label}`\n        },\n        update: handler\n      });\n    }\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(Stat, {\n      label: this.code,\n      value: this.value,\n      handler: handler\n    });\n  }\n}\n\n//# sourceURL=webpack://hubris-web/./web/models/character/sections/stats.js?");

/***/ })

}]);